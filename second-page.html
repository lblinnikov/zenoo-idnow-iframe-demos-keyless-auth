<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embed Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Authentication</h1>
        <p>Please perform the authentication via our partner below:</p>
        <iframe id="zenoo-embed" allow="camera *; microphone *"></iframe>
    </div>

    <script>
        // Retrieve the start token from sessionStorage
        const startToken = sessionStorage.getItem('start-token');

        if (startToken) {
            const script = document.createElement('script');
            script.src = "https://onboard.idnow.stage-eu.zenoo.io/5f7c9d3bb6c3126692acd922e925f7a8301586e6/assets/embed.js";
            script.setAttribute('iframe-id', 'zenoo-embed');
            script.setAttribute('start-token', startToken);

            document.body.appendChild(script);
        } else {
            console.error('Start token not found');
        }

        navigator.mediaDevices.getUserMedia({audio: true, video: true})
            .then(function(stream) {
            console.log('Get User Media - Got stream');
            })
            .catch(function(err) {
            console.log('Get User Media - failed with error');
            });

    </script>

</body>
</html>
